<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Expert Strategy Impact Chart</title>

  <!-- Tailwind for styling (optional) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Datalabels Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

  <style>
    :root {
      --bg: #ffffff;
      --fg: #1f2937;
    }

    .dark {
      --bg: #171717;
      --fg: #f3f4f6;
    }

    body {
      background-color: var(--bg);
      color: var(--fg);
      font-family: 'Inter', sans-serif;
      transition: background 0.3s, color 0.3s;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-10">

  <div class="max-w-4xl w-full bg-white dark:bg-neutral-900 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-neutral-700">
    <h2 class="text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white">
      Impact of Strategy on Business Metrics
    </h2>
    <canvas id="impactChart" class="w-full h-auto"></canvas>
  </div>

  <script>
    // Register plugin
    Chart.register(ChartDataLabels);

    const ctx = document.getElementById("impactChart").getContext("2d");
    const isDark = document.documentElement.classList.contains("dark");

    const impactChart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: [
          "Launch Clarity Score (1-10)",
          "Time to First Client (Days)",
          "Perceived Offer Value ($)"
        ],
        datasets: [
          {
            label: "Before (No Strategy)",
            data: [2, 180, 500],
            backgroundColor: "rgba(107, 114, 128, 0.5)", // gray-500
            borderColor: "rgba(107, 114, 128, 1)",
            borderWidth: 1
          },
          {
            label: "After (With Strategy)",
            data: [9, 30, 2500],
            backgroundColor: [
              "rgba(245, 158, 11, 0.6)", // Amber 500
              "rgba(217, 119, 6, 0.6)",  // Amber 600
              "rgba(180, 83, 9, 0.6)"    // Amber 700
            ],
            borderColor: [
              "rgb(245, 158, 11)",
              "rgb(217, 119, 6)",
              "rgb(180, 83, 9)"
            ],
            borderWidth: 1
          }
        ]
      },
      options: {
        responsive: true,
        aspectRatio: 2,
        plugins: {
          legend: {
            position: "top",
            labels: {
              color: isDark ? "#f3f4f6" : "#1f2937"
            }
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const label = context.dataset.label || '';
                const value = context.parsed.y;
                const metric = context.label;
                if (metric.includes("Clarity")) return `${label}: ${value} / 10`;
                if (metric.includes("Client")) return `${label}: ${value} days`;
                if (metric.includes("Value")) return `${label}: $${value}`;
                return `${label}: ${value}`;
              }
            }
          },
          datalabels: {
            display: function(context) {
              return context.dataset.label === "After (With Strategy)";
            },
            align: "end",
            anchor: "end",
            color: isDark ? "#fefce8" : "#1f2937",
            font: {
              weight: "bold"
            },
            formatter: function(value, context) {
              const idx = context.dataIndex;
              const improvements = ["+350%", "-83%", "+400%"];
              return improvements[idx];
            }
          }
        },
        scales: {
          x: {
            ticks: {
              color: isDark ? "#f3f4f6" : "#1f2937"
            },
            grid: {
              color: isDark ? "rgba(255,255,255,0.1)" : "rgba(0,0,0,0.1)"
            }
          },
          y: {
            beginAtZero: true,
            ticks: {
              color: isDark ? "#f3f4f6" : "#1f2937"
            },
            grid: {
              color: isDark ? "rgba(255,255,255,0.1)" : "rgba(0,0,0,0.1)"
            }
          }
        }
      },
      plugins: [ChartDataLabels]
    });
  </script>

</body>
</html>
